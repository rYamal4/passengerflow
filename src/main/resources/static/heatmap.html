<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏</title>
    <link rel="stylesheet" href="heatmap.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöå</text></svg>">
</head>
<body>
<header class="page-header">
    <div class="container">
        <h1>–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏</h1>
        <a href="index.html" class="btn btn-secondary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            –ù–∞–∑–∞–¥
        </a>
    </div>
</header>

<section class="controls-section">
    <div class="container">
        <div class="controls-grid">
            <div class="control-group">
                <label for="routeSelect">–ú–∞—Ä—à—Ä—É—Ç</label>
                <select id="routeSelect" class="form-select">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç...</option>
                </select>
            </div>
            <div class="control-group slider-container">
                <label for="hourSlider">–í—Ä–µ–º—è: <span id="hourValue">12</span>:00</label>
                <input type="range" id="hourSlider" class="hour-slider" min="6" max="18" value="12">
                <div class="hour-marks">
                    <span>6:00</span>
                    <span>12:00</span>
                    <span>18:00</span>
                </div>
            </div>
            <div class="control-group">
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="useWeatherCheckbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <div class="toggle-label">
                        <span class="toggle-label-text">–£—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ–≥–æ–¥—É</span>
                        <span class="toggle-label-hint" id="weatherStatus">
                            <span class="weather-badge active">+20% –ø—Ä–∏ –¥–æ–∂–¥–µ</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="control-group">
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="viewModeCheckbox">
                        <span class="toggle-slider"></span>
                    </label>
                    <div class="toggle-label">
                        <span class="toggle-label-text">–í–∏–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                        <span class="toggle-label-hint" id="viewModeStatus">
                            <span class="view-badge">–ö–∞—Ä—Ç–∞</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="loading-indicator" id="loadingIndicator" style="display: none;">
    <div class="spinner"></div>
    <span>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>
</div>

<section class="map-section">
    <div class="container">
        <div class="map-container">
            <div class="legend">
                <h3>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å</h3>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #9E9E9E;"></span>
                    <div class="legend-text">
                        <span class="legend-range">‚Äî</span>
                        <span class="legend-label">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
                    </div>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #10b981;"></span>
                    <div class="legend-text">
                        <span class="legend-range">0‚Äì50%</span>
                        <span class="legend-label">–ù–∏–∑–∫–∞—è</span>
                    </div>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #f59e0b;"></span>
                    <div class="legend-text">
                        <span class="legend-range">50‚Äì80%</span>
                        <span class="legend-label">–°—Ä–µ–¥–Ω—è—è</span>
                    </div>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #f97316;"></span>
                    <div class="legend-text">
                        <span class="legend-range">80‚Äì100%</span>
                        <span class="legend-label">–í—ã—Å–æ–∫–∞—è</span>
                    </div>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #ef4444;"></span>
                    <div class="legend-text">
                        <span class="legend-range">100‚Äì120%</span>
                        <span class="legend-label">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è</span>
                    </div>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #dc2626;"></span>
                    <div class="legend-text">
                        <span class="legend-range">>120%</span>
                        <span class="legend-label">–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞</span>
                    </div>
                </div>
            </div>

            <div class="visualization-area">
                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">üó∫Ô∏è</div>
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç</h3>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç –∏–∑ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫</p>
                </div>
                <svg id="heatmapSvg" width="100%" height="600" style="display: none;"></svg>
                <div id="heatmapTable" class="heatmap-table-container" style="display: none;"></div>
            </div>
        </div>
    </div>
</section>

<div class="tooltip" id="tooltip" style="display: none;">
    <div class="tooltip-content">
        <strong id="tooltipStopName"></strong>
        <div id="tooltipTime"></div>
        <div id="tooltipOccupancy"></div>
    </div>
</div>

<div class="toast-container" id="toastContainer"></div>

<script src="heatmap.js"></script>
</body>
</html>
