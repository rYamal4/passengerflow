<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PassengerFlow - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–ø–æ—Ç–æ–∫–æ–º</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöå</text></svg>">
</head>
<body>
<header class="page-header">
    <div class="container">
        <h1>PassengerFlow</h1>
        <div class="header-actions">
            <button class="btn btn-primary" id="addNewRecord">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                –î–æ–±–∞–≤–∏—Ç—å
            </button>
            <button class="btn btn-secondary" id="aggregateData">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="20" x2="18" y2="10"></line>
                    <line x1="12" y1="20" x2="12" y2="4"></line>
                    <line x1="6" y1="20" x2="6" y2="14"></line>
                </svg>
                –ê–≥—Ä–µ–≥–∞—Ü–∏—è
            </button>
            <a href="heatmap.html" class="btn btn-secondary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
                    <line x1="8" y1="2" x2="8" y2="18"></line>
                    <line x1="16" y1="6" x2="16" y2="22"></line>
                </svg>
                –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞
            </a>
        </div>
    </div>
</header>

<section class="filters-section">
    <div class="container">
        <div class="filters-grid">
            <div class="filter-group">
                <label for="busFilter">–ê–≤—Ç–æ–±—É—Å</label>
                <select id="busFilter" class="form-select">
                    <option value="">–í—Å–µ –∞–≤—Ç–æ–±—É—Å—ã</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="stopFilter">–û—Å—Ç–∞–Ω–æ–≤–∫–∞</label>
                <select id="stopFilter" class="form-select">
                    <option value="">–í—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="startTimeFilter">–° –¥–∞—Ç—ã</label>
                <input type="datetime-local" id="startTimeFilter" class="form-input">
            </div>
            <div class="filter-group">
                <label for="endTimeFilter">–ü–æ –¥–∞—Ç—É</label>
                <input type="datetime-local" id="endTimeFilter" class="form-input">
            </div>
            <div class="filter-actions">
                <button class="btn btn-primary" id="applyFilters">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                </button>
                <button class="btn btn-outline" id="clearFilters">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                    –°–±—Ä–æ—Å–∏—Ç—å
                </button>
                <button class="btn btn-outline" id="refreshData">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="23 4 23 10 17 10"></polyline>
                        <polyline points="1 20 1 14 7 14"></polyline>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                    </svg>
                    –û–±–Ω–æ–≤–∏—Ç—å
                </button>
            </div>
        </div>
    </div>
</section>

<div class="loading-indicator" id="loadingIndicator" style="display: none;">
    <div class="spinner"></div>
    <span>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>
</div>

<section class="table-section">
    <div class="container">
        <div class="table-wrapper">
            <table class="data-table" id="dataTable">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>–ê–≤—Ç–æ–±—É—Å</th>
                    <th>–û—Å—Ç–∞–Ω–æ–≤–∫–∞</th>
                    <th>–ú–∞—Ä—à—Ä—É—Ç</th>
                    <th>–í–æ—à–ª–æ</th>
                    <th>–í—ã—à–ª–æ</th>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>

            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">üìä</div>
                <h3>–ó–∞–ø–∏—Å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å</p>
            </div>
        </div>
    </div>
</section>

<section class="pagination-section">
    <div class="container">
        <div class="pagination-info">
            <span id="paginationInfo">–ó–∞–ø–∏—Å–∏ 1-20 –∏–∑ 100</span>
        </div>
        <div class="pagination-controls">
            <button class="btn btn-outline btn-icon" id="firstPage" title="–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="11 17 6 12 11 7"></polyline>
                    <polyline points="18 17 13 12 18 7"></polyline>
                </svg>
            </button>
            <button class="btn btn-outline btn-icon" id="prevPage" title="–ü—Ä–µ–¥—ã–¥—É—â–∞—è">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <div class="page-numbers" id="pageNumbers">
            </div>
            <button class="btn btn-outline btn-icon" id="nextPage" title="–°–ª–µ–¥—É—é—â–∞—è">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
            <button class="btn btn-outline btn-icon" id="lastPage" title="–ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="13 17 18 12 13 7"></polyline>
                    <polyline points="6 17 11 12 6 7"></polyline>
                </svg>
            </button>
        </div>
        <div class="page-size-selector">
            <label for="pageSize">–ü–æ–∫–∞–∑–∞—Ç—å:</label>
            <select id="pageSize" class="form-select">
                <option value="10">10</option>
                <option value="20" selected>20</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>
</section>

<div class="modal-overlay" id="modalOverlay" style="display: none;">
    <div class="modal" id="recordModal">
        <div class="modal-header">
            <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</h2>
            <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body">
            <form id="recordForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalBusId">–ê–≤—Ç–æ–±—É—Å <span class="required">*</span></label>
                        <select id="modalBusId" name="busId" class="form-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ–±—É—Å</option>
                        </select>
                        <div class="error-message" id="busIdError"></div>
                    </div>
                    <div class="form-group">
                        <label for="modalStopId">–û—Å—Ç–∞–Ω–æ–≤–∫–∞ <span class="required">*</span></label>
                        <select id="modalStopId" name="stopId" class="form-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∫—É</option>
                        </select>
                        <div class="error-message" id="stopIdError"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalEntered">–í–æ—à–ª–æ <span class="required">*</span></label>
                        <input type="number" id="modalEntered" name="entered" class="form-input" min="0" placeholder="0" required>
                        <div class="error-message" id="enteredError"></div>
                    </div>
                    <div class="form-group">
                        <label for="modalExited">–í—ã—à–ª–æ <span class="required">*</span></label>
                        <input type="number" id="modalExited" name="exited" class="form-input" min="0" placeholder="0" required>
                        <div class="error-message" id="exitedError"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="modalTimestamp">–í—Ä–µ–º—è <span class="required">*</span></label>
                    <input type="datetime-local" id="modalTimestamp" name="timestamp" class="form-input" required>
                    <div class="error-message" id="timestampError"></div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline" id="modalCancel">–û—Ç–º–µ–Ω–∞</button>
            <button type="submit" form="recordForm" class="btn btn-primary" id="modalSave">
                <span class="btn-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                <span class="btn-spinner" style="display: none;"></span>
            </button>
        </div>
    </div>
</div>

<div class="toast-container" id="toastContainer"></div>

<div class="modal-overlay" id="confirmationOverlay" style="display: none;">
    <div class="modal confirmation-modal">
        <div class="modal-header">
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
        </div>
        <div class="modal-body">
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline" id="confirmCancel">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="btn btn-danger" id="confirmDelete">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="aggregationOverlay" style="display: none;">
    <div class="modal">
        <div class="modal-header">
            <h2>–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</h2>
            <button class="modal-close" id="aggregationClose">&times;</button>
        </div>
        <div class="modal-body">
            <p style="color: var(--gray-600); margin-bottom: 1rem;">–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–ø–æ—Ç–æ–∫–∞:</p>
            <div class="form-group">
                <label for="dayOfWeekSelect">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</label>
                <select id="dayOfWeekSelect" class="form-select">
                    <option value="1">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                    <option value="2">–í—Ç–æ—Ä–Ω–∏–∫</option>
                    <option value="3">–°—Ä–µ–¥–∞</option>
                    <option value="4">–ß–µ—Ç–≤–µ—Ä–≥</option>
                    <option value="5">–ü—è—Ç–Ω–∏—Ü–∞</option>
                    <option value="6">–°—É–±–±–æ—Ç–∞</option>
                    <option value="7">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline" id="aggregationCancel">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="btn btn-primary" id="aggregationConfirm">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
